<!-- Recipe View -->
<!-- Modal Structure -->
<style>
    #recipe{
        width:100% !important;
        height:100% !important;
        max-height:100% !important;
        top:0 !important;
    }
</style>


<div id="recipe" class="modal">
    <div class="modal-content">

        <div id="close_recipe"><i  class="material-icons">close</i></div>
        <h6 id="recipe_name">Test</h6>
        <img id="recipe_image" class="responsive-img" src="https://dw75asfpu22ml.cloudfront.net/recipe/8e5f9fa8-4cc9-42a5-82a5-dd126ded9019.jpg">
        <div class="row">
            Ingredients:
        </div>
        <div class="row">
            <ul id="ingredients_list">
                <li><strong>16 oz</strong> Salt</li>
            </ul>
        </div>
        <div id="steps_container">

        </div>
    </div>
    <!--<div class="modal-footer">-->
        <!--<a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat">Agree</a>-->
    <!--</div>-->
</div>
<!--<a class="waves-effect waves-light btn modal-trigger" href="#recipe">Modal</a>-->

  <!--<div class="recipe-card">-->

  <!--<aside>-->

    <!--<img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/203277/oatmeal.jpg" alt="Oatmeal" />-->

    <!--<a href="#" class="button"><span class="icon icon-play"></span></a>-->

  <!--</aside>-->

  <!--<article>-->


<!--<div class="description">-->
      <!--<div>-->
        <!--<h5 class="sub">Recipe Name</h5>-->
        <!--<h4>Oatmeal Mix</h4>-->
      <!--</div>-->
      <!--<div>-->
        <!--<h5 class="sub">Time</h5>-->
        <!--<h4>1h 30m</h4>-->
      <!--</div>-->
      <!--<div>-->
        <!--<h5 class="sub">Rating</h5>-->
        <!--<h4>-->
          <!--<i class="fa fa-star"></i>-->
          <!--<i class="fa fa-star"></i>-->
          <!--<i class="fa fa-star"></i>-->
          <!--<i class="fa fa-star-o"></i>-->
          <!--<i class="fa fa-star-o"></i>-->
        <!--</h4>-->
      <!--</div>-->
    <!--</div>-->


    <!--<p class="ingredients"><span>Ingredients:&nbsp;</span>Milk, salt, coriander, cardamom, cinnamon, turmeric, honey, vanilla extract, regular oats, oat bran.</p>-->

  <!--</article>-->

<!--</div>-->


<script>
    $(document).ready(function(){
        $('#recipe').modal({
                    dismissible: true, // Modal can be dismissed by clicking outside of the modal
//                    opacity: .5, // Opacity of modal background
                    inDuration: 500, // Transition in duration
                    outDuration: 200, // Transition out duration
//                    startingTop: '2%', // Starting top style attribute
//                    endingTop: '10%', // Ending top style attribute
                    ready: function(modal, trigger) { // Callback for Modal open. Modal and trigger parameters available.
//                        alert("Ready");
//                        console.log(modal, trigger);
                    }
//                    complete: function() { alert('Closed'); } // Callback for Modal close
                }
        );
    });
    function dataInit(r) {
        $('#recipe_name').html(r.Recipe);
        $('#recipe_image').attr("src", r.recipe_photo);
        $('#ingredients_list').empty();
        JSON.parse(r.ingredients).forEach(function (element) {
            $('#ingredients_list').append(
                    $('<li class="ingr-text"><strong>' + element.amount + '</strong> '
                            + '<display nameTag="' + element.name + '">' + element.name + '</li>')
            );
        });
        $('.ingr-text display').on('click',function(){
          console.log($(this).attr('nameTag'));
            ingredientInit($(this).attr('nameTag'));
          //console.log(inputVar=="Eggs");
          //console.log(inputVar==="Eggs");
        });


        stepCount=1;
        $('#steps_container').empty();
        JSON.parse(r.steps).forEach(function (element) {
            $('#steps_container').append(
              $('<div class="row">'+
                      '<h4>Step '+stepCount+'</h4>'+
                      '<p>'+element.text+'</p>'+
                      '<img class="responsive-img" src="'+element.imageurl+'">'+
                      '</div>')
            );
            stepCount++;
        });


    }

    function recipeInit(name){
        $('#recipe').modal('open');
        $.ajax({
            method: "GET",
            url: "/recipe",
            data: { name: name }
        }).done(function( msg ) {
            console.log(msg);
            dataInit(msg);
        });
    }
    $('#close_recipe').on('click',function(){
        $('#recipe').modal('close');
    });
</script>